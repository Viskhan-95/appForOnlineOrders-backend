# üöÄ Redis Setup –¥–ª—è Online Orders Backend

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

Redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫:**

```bash
# –ó–∞–ø—É—Å–∫ Redis
./scripts/start-redis.sh

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Redis
./scripts/stop-redis.sh
```

### **–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫:**

```bash
# –ó–∞–ø—É—Å–∫ Redis
docker-compose -f docker-compose.redis.yml up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Redis
docker-compose -f docker-compose.redis.yml down

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose -f docker-compose.redis.yml logs -f
```

## üåê –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

- **Redis Server:** `localhost:6379`
- **Redis Commander (Web UI):** `http://localhost:8081`

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

```env
# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=online_orders:
REDIS_TTL_USER=3600
REDIS_TTL_SESSION=1800
REDIS_TTL_AUTH=300
REDIS_TTL_GENERAL=600
```

### **TTL (Time To Live):**

- **User:** 1 —á–∞—Å (3600 —Å–µ–∫—É–Ω–¥)
- **Session:** 30 –º–∏–Ω—É—Ç (1800 —Å–µ–∫—É–Ω–¥)
- **Auth:** 5 –º–∏–Ω—É—Ç (300 —Å–µ–∫—É–Ω–¥)
- **General:** 10 –º–∏–Ω—É—Ç (600 —Å–µ–∫—É–Ω–¥)

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### **Redis Commander:**

- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Redis
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–ª—é—á–µ–π –∏ –∑–Ω–∞—á–µ–Ω–∏–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### **Redis CLI:**

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis
docker exec -it online_orders_redis redis-cli

# –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
INFO                    # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ
MONITOR                # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–º–∞–Ω–¥
SLOWLOG GET 10         # –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
MEMORY USAGE           # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
```

## üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–º—è—Ç–∏:**

- **maxmemory:** 256MB
- **maxmemory-policy:** allkeys-lru (—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ LRU)

### **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:**

- **RDB:** –°–Ω–∞–ø—à–æ—Ç—ã –∫–∞–∂–¥—ã–µ 900/300/60 —Å–µ–∫—É–Ω–¥
- **AOF:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã

## üö® –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **–°–µ—Ç–µ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

- Redis –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ
- –ü–æ—Ä—Ç 6379 –Ω–µ –æ—Ç–∫—Ä—ã—Ç –Ω–∞—Ä—É–∂—É

### **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**

- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ `requirepass` –≤ `redis.conf`
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–ª–æ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 1 —á–∞—Å
- –°–µ—Å—Å–∏–∏ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 30 –º–∏–Ω—É—Ç
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 5 –º–∏–Ω—É—Ç

### **–ú–µ—Ç—Ä–∏–∫–∏:**

- Latency monitoring –≤–∫–ª—é—á–µ–Ω
- Slow log –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ > 10ms
- Health checks –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

## üêõ Troubleshooting

### **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose -f docker-compose.redis.yml ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose -f docker-compose.redis.yml logs redis

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
docker exec -it online_orders_redis redis-cli ping
```

### **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é:**

```bash
# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
docker exec -it online_orders_redis redis-cli FLUSHALL

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–º—è—Ç–∏
docker exec -it online_orders_redis redis-cli INFO memory
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Redis Documentation](https://redis.io/documentation)
- [Redis Commander](https://github.com/joeferner/redis-commander)
- [Redis Best Practices](https://redis.io/topics/optimization)

